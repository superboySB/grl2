#!/bin/zsh


algos=(
    # ppg
    # iqn
    # apex-fqf
    # sacdiqn2
    apex-sacdiqn5
)
suite=procgen
envs=(
    chaser
    # "ninja"
    plunder
    bigfish
    starpilot
    coinrun
    miner 
    caveflyer 
    climber
    dodgeball 
    leaper
    jumper
    fruitbot
    heist
    bossfight
)
args1=(procgen)
args2=(2l)
args3=(conv_maxblurpool)

# for e in "${envs[@]}"; do
#     for a in "${algos[@]}"; do
#         for a1 in "${args1[@]}"; do
#             for a2 in "${args2[@]}"; do
#                 for a3 in "${args3[@]}"; do
#                     # sed -e "s/ET/${a2}/g" -e "s/AM/${a1}/g" -e "s/SUB/${a3}/g" \
#                     #     algo/ppo/${suite}_template.yaml > algo/ppo/${suite}_config.yaml
#                     dir="logs/${suite}_${e}/${a}"
#                     mkdir -p $dir
#                     py_script="train ${a} -e ${suite}_${e} $@ >& ${dir}/outputs.txt"
#                     echo $py_script
#                     eval $py_script
#                     last_dir=$(ls -td ${dir}/* | grep -v txt | head -n 1)
#                     mv_script="mv ${dir}/outputs.txt ${last_dir}/outputs.txt"
#                     echo $mv_script
#                     eval $mv_script
#                 done
#             done
#         done
#     done
# done

for e in "${envs[@]}"; do
    for a in "${algos[@]}"; do
        for a1 in "${args1[@]}"; do
            dir="logs/${suite}_${e}/${a}"
            mkdir -p $dir
            py_script="train ${a} -e ${suite}_${e} $@ >& ${dir}/outputs.txt"
            echo $py_script
            eval $py_script
            last_dir=$(ls -td ${dir}/* | grep -v txt | head -n 1)
            mv_script="mv ${dir}/outputs.txt ${last_dir}/outputs.txt"
            echo $mv_script
            eval $mv_script
        done
    done
done